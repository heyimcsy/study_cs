# CPU

### 레지스터
- CPU 속에 있는 작은 임시 저장장치이다.  다양한 레지스터가 있는데, 각기 다른 이름과 역할이 있다.
- WinDblog(윈도우 운영체제), gbd(리눅스, 맥 os 운영체제) 들의 디버깅 도구를 이용해 관찰 할 수 있다.
- 앞으로 설명되는 레지스터들을 대부분 CPU가 공통적으로 포함하고 있는 대표적인 주요 레지스터이다. 

#### 1.프로그램 카운터
- 메모리에서 다음으로 읽어 들일 명령어의 주소를 저장하는 레지스터. 명령어 포인터 라고 부르기도 한다.
- 플로그램 카운터는 1씩 증가한다. 다음으로 읽어 들일 메모리 주소가 1씩 증가하는 것
- 하지만 조건문이나 리턴문 같은 조건으로 인해서 순차적으로 실행이 되지 않을 수도 있다.그럴때는 프로그램 카운터 값이 임의의 위치로 변경이 된다.

#### 2.명령어 레지스터
- 해석할 명령어 즉, 방금 읽어 들인 명령어를 저장하는 레지스터.
- cpu 내 제어장치는 명령어 레지스터 속 명령어를 해석한 뒤 ALU로 연산하도록 하거나 다른 부품으로 제어 신호를 보내 해당 부품을 작동시킨다.

#### 3. 범용 레지스터
- 일반적인 상황에서 자유롭게 사용할 수 있는 레지스터. 데이터와 명령어, 주소 모두를 저장할 수 있다.

#### 4.플래그 레지스터
- 연산의 결과와 CPU 상태에 대한 부가 정보인 플래그 값을 저장하는 레지스터. 플래그는 명령어를 처리하는 과정 속 반드시 참조해야 할 상태 정보를 의미하는 비트.

| 종류        | 설명                                |
|-----------|-----------------------------------|
| 부호 플래그    | 연산 결과의 부호                         |
| 제로 플래그    | 연산 결과가 0인지의 여부                    |
| 캐리 플래그    | 연산 결과에 올림수나 빌림수가 발생했는지의 여부        |
| 오버플로우 플래그 | 오버플로우가 발생했는지의 여부                  |
| 인터럽트 플래그  | 인터럽트가 가능한지의 여부                    |
| 슈퍼바이저 플래그 | 커널 모드로 실행 중인지, 사용자 모드로 실행 중인지의 여부 |

#### 5.스택 포인터
- 메모리에는 실행 중인 프로그램들이 적재되어 있다. 실행 중인 각 프로그램들은 스택과 같은 형태로 사용 가능한 주소 공간을 하나 이상 가지고 있다.
- 암묵적으로 이렇게 스택처럼 사용하자고 약속된 영역을 스택 영역이라고 한다. 
- 메모리 내 스택 영역의 최상단 스택 데이터 위치를 가리키는 특별한 레지스터를 스택 포인터라고 한다.
- 마지막으로 스택에 저장된 데이터의 위치를 가리키는 레지스터이자, 스택이 채워진 정도를 나타내는 레지스터이다.


### 인터럽트 
- 인터럽트는 방해하다. 중단시키다 라는 의미이다. CPU가 수행중인 작업은 잠시 방해를 받아 중단될 수 있는데, 이렇게 CPU의 작업을 방해하는 신호를 인터럽트라고 한다.
- 임의로 발생 시킬 수 있고,잘못 된 프로그램으로 발생하기도 하고, 효율적인 입출력을 위해 사용되기도 한다.
- 동기인터럽트와 비동기 인터럽트로 크게 나뉜다.
  - 동기인터럽트(예외) : CPU에 의해 발생하는 인터럽트. 프로그래밍 오류와 같은 예외적인 상황에서 발생
  - 비동기 인터럽트 : 입출력장치에 의해 발생하는 인터럽트.알림의 역할을 한다. 하드웨어 인터럽트 라도 불리기도 한다.
    - 프린터에 입출력 작업 부탁 -> 작업을 끝낸 입출력장치가 CPU에게 완료 알림 보냄
    - 키보드 , 마우스 같은 입출력장치를 입력을 받아들인다. -> 처리를 위해 CPU에게 입력 알림을 보냄

### CPU 성능 향상을 위한 설계

### 파이프라이닝을 통한 명령어 병렬 처리
